import config from '../../docusaurus.config.json'
import {
  Button,
  Card,
  CardContent,
  Typography,
  Link,
  Box,
} from '@material-ui/core'
import { Apple, DesktopWindows, ArrowDownward } from '@material-ui/icons'

export const GithubLink = () => {
  const curr = `https://github.com/GMOD/jbrowse-components/releases/tag/${config.customFields.currentVersion}`
  return (
    <div>
      <ul>
        <li>
          <a href={curr}>{curr}</a>
        </li>
      </ul>
    </div>
  )
}

export const DownloadCard = ({ os, icon, link }) => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/download/tag/${config.customFields.currentVersion}/jbrowse-desktop-${config.customFields.currentVersionNo}-${link}`
  return (
    <Box sx={{ display: { xs: 'none', sm: 'none', md: 'flex' } }}>
      <Card style={{ background: '#F0F0F0' }}>
        <CardContent
          style={{
            display: 'flex',
            flexFlow: 'column',
            alignItems: 'center',
          }}
        >
          <h3>{os}</h3>
          <Button
            variant="contained"
            color="primary"
            startIcon={icon}
            href={downloadLink}
          >
            download
          </Button>
        </CardContent>
      </Card>
    </Box>
  )
}

export const DownloadCardContainer = () => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/tag/${config.customFields.currentVersion}`
  return (
    <div
      style={{
        display: 'flex',
        flexDirection: 'column',
        gap: '20px',
      }}
    >
      <div
        style={{
          display: 'flex',
          flexDirection: 'row',
          justifyContent: 'space-evenly',
        }}
      >
        <DownloadCard os="MacOS" icon={<Apple />} link="mac.dmg" />
        <DownloadCard os="Windows" icon={<DesktopWindows />} link="win.exe" />
        <DownloadCard
          os="Linux"
          icon={<ArrowDownward />}
          link="linux.AppImage"
        />
      </div>
      <Typography
        variant="caption"
        style={{
          alignSelf: 'center',
        }}
      >
        Can't find what you're looking for? Checkout&nbsp;
        <Link href={downloadLink}>other platforms</Link>.
      </Typography>
    </div>
  )
}

## JBrowse 2 desktop

Download JBrowse 2 desktop on the platform of your choice:

<DownloadCardContainer />

<br />

<p align="center">
  <img
    width="720"
    alt="JBrowse desktop session"
    src="/img/desktop-session.png"
  />
</p>
<br />

## JBrowse 2 web

To get started with JBrowse Web, we recommend using the jbrowse CLI tools.
You can also use the jbrowse CLI for things like adding tracks too.

```
npm install -g @jbrowse/cli

## Downloads the latest release of jbrowse from github releases
jbrowse create jbrowse_folder
```

Alternatively, manually download this release as a zip file from GitHub here:

<GithubLink />

To get it set up, check out our [super-quick start
guide](/docs/superquickstart_web) or slightly-longer [quick-start
guide](/docs/quickstart_web) for setting up JBrowse Web.

### Other CLI tools

- [@jbrowse/img](https://github.com/GMOD/jb2export/) image exporter

## JBrowse 2 embedded components

- [@jbrowse/react-linear-genome-view](https://www.npmjs.com/package/@jbrowse/react-linear-genome-view) linear genome browser view React component on <tt>NPM</tt>
  - also see [storybook docs](https://jbrowse.org/storybook/lgv/v1.4.4/?path=/story/getting-started--page)
- [JBrowseR](https://gmod.github.io/JBrowseR/) R package on <tt>CRAN</tt>
